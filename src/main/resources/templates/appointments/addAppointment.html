<!DOCTYPE HTML>
<html>
<header th:replace="fragments/head.html :: head" >
</header>
<body>
	<div id="container" class="container-fluid" >
	<div class="row">
		<header th:replace="fragments/header.html :: header" >
		</header>
		<div id="mainBody" class="col-md-8">
			
			<div class="container">
<!-- 			<a class="btn btn-info btn-width" data-th-href="@{/pets/new/}">Add a new Pet</a>									
 -->			<a class="btn btn-info btn-width" data-th-href="@{/clients/new}">Add a new Client</a>
 
  <!-- Form for the modal starts here -->
			<table class="table table-striped">
				<thead>
					<tr>
						<th scope="col">Pet Name</th>
						<th scope="col"></th>							
																	
					</tr>
				</thead>
				<tbody>	
					<tr data-th-each="pet : ${petCommands}">
						
							<td data-th-text="${pet.name}">...</td>	
							<td data-th-text="${pet.gender}">...</td>						
							<td>
								<!-- <a class="btn btn-primary" data-toggle="collapse" data-th-href="'#collapse' + ${pet.id}" role="button" aria-expanded="false" aria-controls="collapseExample">
								    Create appointment
							  	</a> -->
							  	
							  	<button type="button" class="btn btn-primary" data-toggle="modal" th:attr="data-target='#modal'+${pet.id}">
								  Create appointment
								</button>
							  	
							</td>
				        	<form class="" th:id="'appointmentForm' + ${pet.id}" action="#" data-th-action="@{/appointments}" data-th-object="${command}" method="post">
							
								<div class="modal fade" data-th-id="'modal'+${pet.id}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
								  <div class="modal-dialog" role="document">
								    <div class="modal-content">
								      <div class="modal-header">
								        <h5 class="modal-title" id="exampleModalLabel">Add a new Appointment</h5>
								        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
								          <span aria-hidden="true">&times;</span>
								        </button>
								      </div>
								      <div class="modal-body">
								      
								     
											<!-- Hidden fields goes here -->
											<input th:id="petId" type="hidden" name="petId" data-th-value="${pet.id}" />
											<input th:id="clientId" type="hidden" name="clientId" data-th-value="${pet.clientId}" />							
											
											
											<div class="form-group">
												<label for="clientName">Client</label>
												<span data-th-text = "${pet.client.name}" class="form-control" readonly></span>
											</div>
											
											<div class="form-group">
												<label for="reason">Reason</label>			
												<select th:id = "reason" name = "reason" type="select" class="form-control" data-th-value="*{reason}">
													 <option th:each="reason : ${reasons}" 
													         data-th-value="${reason}" 
													         th:text="${reason}">Reason</option>
												</select>
											</div>				
											
											<!-- <div class="form-group" data-provide="datepicker">
												<label for="duration">Date</label>
									            <input id="dp1" class="form-control datepicker-here" data-th-field="*{duration}">
											</div> -->
											
											<div class="form-group">
												<label for="duration">Duration</label>
									            <input th:id="duration" name="duration" type="number" class="form-control" data-th-value="*{duration}">
											</div>
											
											<div class="form-group">
												<label for="comments">Comments</label>
									            <input th:id="comments" name="comments" type="text" class="form-control" data-th-value="*{comments}">
											</div>
											
											<!-- <div class="form-group">			
												<button type="submit" form="appointmentForm" class="btn btn-primary"  value="Save">Save</button>
											</div>	 -->		
											
											
								      </div>
								      <div class="modal-footer">
								        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
								        <button type="submit" value="submit" class="btn btn-primary">Save changes</button>
								      </div>
								    </div>
								  </div>
								</div>	
							</form>
																								
					</tr>
				</tbody>
			</table>
			</div>
			
			
		</div>
	</div>
		
		
		<script type="text/javascript">
		$('#dp1').datepicker();
		</script>
</body>
</html>




